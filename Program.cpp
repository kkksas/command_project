//
//
//  Generated by StarUML(tm) C++ Add-In
//
//  @ Project : Untitled
//  @ File Name : program.cpp
//  @ Date : 19.12.2022
//  @ Author : 
//
//
char* slm_path = "salesman_list.txt";
char* storage_path = "storage.txt";
char* order_list_path= "orderlist.txt";
#include "program.h"

Program::Program(string nm){
    summary = new Summary(&order_list,&salesman_list,&storage);
    owner= new Owner(&salesman_list , nm, &storage, &order_list,summary);
    salesman_list.get_list_from_file(slm_path);
    storage.get_storage_from_file(storage_path);
    order_list.get_order_list_from_file(order_list_path);
}

Program::~Program(){

    salesman_list.put_list_to_file(slm_path);
    storage.put_storage_to_file(storage_path);
    order_list.put_order_list_to_file(order_list_path);
}

void Program::log_in() {
    int Tempid;
    while(true){
        cout<<"Enter your id"<<endl;
        cin >> Tempid;
        cin.ignore(80, '\n');
        if (Tempid==0){
            autorised_user=owner;
            cout<<"Welcome! "<<autorised_user->get_name()<<endl;
            autorised_user->interact();
            break;
        }
       else{
            if (salesman_list.in_list(Tempid)){
            autorised_user=salesman_list.find_slm(Tempid);
            cout<<"Welcome! "<<autorised_user->get_name()<<endl;
            autorised_user->interact();
            break;
            }
            else {
                cout<<"Inpur error."<<endl;
                continue;
            }
        }
    }
}

